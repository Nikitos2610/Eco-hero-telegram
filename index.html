<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neon Reels - Retro Slot Machine</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        body {
            background: linear-gradient(45deg, #1a1a1a, #2c003e, #1a1a1a, #2c003e);
            background-size: 400%;
            color: #fff;
            font-family: 'Press Start 2P', cursive;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            animation: gradient 15s ease infinite;
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .casino-container {
            text-align: center;
            padding: 20px;
            background: #000;
            border: 5px solid #ff00ff;
            box-shadow: 0 0 20px #00ffff;
            border-radius: 10px;
            max-width: 400px;
            position: relative;
            z-index: 1;
        }

        h1 {
            font-size: 24px;
            color: #ff69b4;
            text-shadow: 0 0 10px #00ffff;
            margin-bottom: 20px;
        }

        .balance, .jackpot {
            font-size: 18px;
            color: #ffd700;
            margin-bottom: 10px;
        }

        .slot-machine {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .reel {
            width: 80px;
            height: 80px;
            background: #222;
            border: 3px solid #00ffff;
            border-radius: 10px;
            font-size: 30px;
            line-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 10px #ff00ff;
            overflow: hidden;
        }

        .win-flash {
            animation: flash 0.5s ease-in-out 3;
        }

        @keyframes flash {
            0% { box-shadow: 0 0 10px #ff00ff; }
            50% { box-shadow: 0 0 20px #ffd700; }
            100% { box-shadow: 0 0 10px #ff00ff; }
        }

        .shake {
            animation: shake 0.3s ease-in-out;
        }

        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }

        .spin-button, .bonus-button, .daily-bonus {
            background: #ff4500;
            color: #fff;
            border: 3px solid #ffd700;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            border-radius: 5px;
            box-shadow: 0 0 10px #00ffff;
            transition: all 0.3s;
            margin: 5px;
        }

        .spin-button:disabled, .bonus-button:disabled, .daily-bonus:disabled {
            background: #555;
            cursor: not-allowed;
        }

        .spin-button:hover:not(:disabled), .bonus-button:hover:not(:disabled), .daily-bonus:hover:not(:disabled) {
            background: #ff69b4;
            box-shadow: 0 0 15px #ffd700;
        }

        .result {
            font-size: 16px;
            color: #00ff00;
            margin-top: 20px;
            text-shadow: 0 0 5px #ff00ff;
            min-height: 20px;
        }

        .spinning {
            animation: spin 0.1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotateX(0deg); }
            100% { transform: rotateX(360deg); }
        }

        .bonus-game {
            display: none;
            margin-top: 20px;
        }

        .bonus-game.active {
            display: block;
        }

        canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }
    </style>
</head>
<body>
    <canvas id="confetti-canvas"></canvas>
    <div class="casino-container">
        <h1>üé∞ Neon Reels üé∞</h1>
        <div class="balance">üí∞ Balance: <span id="balance">1000</span> coins</div>
        <div class="jackpot">üéØ Jackpot: <span id="jackpot">1000</span> coins</div>
        <div class="slot-machine">
            <div class="reel" id="reel1">üçí</div>
            <div class="reel" id="reel2">üîî</div>
            <div class="reel" id="reel3">üíé</div>
        </div>
        <button id="spin-button" class="spin-button">Spin (10 coins)</button>
        <button id="daily-bonus" class="daily-bonus">Daily Bonus</button>
        <div id="bonus-game" class="bonus-game">
            <p>üé¥ Guess the Card Color!</p>
            <button class="bonus-button" onclick="guessCard('red')">Red</button>
            <button class="bonus-button" onclick="guessCard('black')">Black</button>
        </div>
        <div id="result" class="result"></div>
    </div>
    <script>
        // –°–∏–º–≤–æ–ª—ã –∏ –∏—Ö –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏
        const symbols = ["üçí", "üîî", "üíé", "7Ô∏è‚É£", "BAR", "üåü"];
        const weights = [0.3, 0.25, 0.2, 0.15, 0.05, 0.05];

        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const reel1 = document.getElementById("reel1");
        const reel2 = document.getElementById("reel2");
        const reel3 = document.getElementById("reel3");
        const balanceElement = document.getElementById("balance");
        const jackpotElement = document.getElementById("jackpot");
        const resultElement = document.getElementById("result");
        const spinButton = document.getElementById("spin-button");
        const dailyBonusButton = document.getElementById("daily-bonus");
        const bonusGame = document.getElementById("bonus-game");

        let balance = 1000;
        let jackpot = 1000;
        let isSpinning = false;
        let currentWin = 0;
        const spinSound = new Audio("https://freesound.org/data/previews/120/120375_2155075-lq.mp3");
        const winSound = new Audio("https://freesound.org/data/previews/511/511484_9156141-lq.mp3");

        // –ö–æ–Ω—Ñ–µ—Ç—Ç–∏ –¥–ª—è –¥–∂–µ–∫–ø–æ—Ç–∞
        const confettiCanvas = document.getElementById("confetti-canvas");
        const confetti = window.confetti.create(confettiCanvas, { resize: true });
        function launchConfetti() {
            confetti({
                particleCount: 100,
                spread: 70,
                origin: { y: 0.6 },
                colors: ["#ff69b4", "#00ced1", "#ffd700", "#ff4500"]
            });
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        window.onload = () => {
            const savedBalance = localStorage.getItem("balance");
            const savedJackpot = localStorage.getItem("jackpot");
            const lastBonus = localStorage.getItem("lastBonus");
            if (savedBalance) balance = parseInt(savedBalance);
            if (savedJackpot) jackpot = parseInt(savedJackpot);
            balanceElement.textContent = balance;
            jackpotElement.textContent = jackpot;
            const now = Date.now();
            if (lastBonus && now - lastBonus < 24 * 60 * 60 * 1000) {
                dailyBonusButton.disabled = true;
                dailyBonusButton.textContent = "Bonus Claimed!";
            }
        };

        // –§—É–Ω–∫—Ü–∏—è –≤—Ä–∞—â–µ–Ω–∏—è –±–∞—Ä–∞–±–∞–Ω–æ–≤
        function spinReels() {
            if (isSpinning || balance < 10) {
                resultElement.textContent = balance < 10 ? "Not enough coins!" : "Wait for the spin to finish!";
                return;
            }

            isSpinning = true;
            spinButton.disabled = true;
            dailyBonusButton.disabled = true;
            bonusGame.classList.remove("active");
            balance -= 10;
            jackpot += 5;
            balanceElement.textContent = balance;
            jackpotElement.textContent = jackpot;
            spinSound.play().catch(() => {});

            // –ê–Ω–∏–º–∞—Ü–∏—è –≤—Ä–∞—â–µ–Ω–∏—è
            reel1.classList.add("spinning");
            reel2.classList.add("spinning");
            reel3.classList.add("spinning");

            // –°–∏–º—É–ª—è—Ü–∏—è –≤—Ä–∞—â–µ–Ω–∏—è
            let spinCount = 0;
            const spinInterval = setInterval(() => {
                reel1.textContent = symbols[Math.floor(Math.random() * symbols.length)];
                reel2.textContent = symbols[Math.floor(Math.random() * symbols.length)];
                reel3.textContent = symbols[Math.floor(Math.random() * symbols.length)];
                spinCount++;
                if (spinCount > 15) {
                    clearInterval(spinInterval);
                    endSpin();
                }
            }, 100);
        }

        // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–ø–∏–Ω–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–∏–≥—Ä—ã—à–∞
        function endSpin() {
            reel1.classList.remove("spinning");
            reel2.classList.remove("spinning");
            reel3.classList.remove("spinning");

            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
            const result = [
                weightedRandom(symbols, weights),
                weightedRandom(symbols, weights),
                weightedRandom(symbols, weights)
            ];
            reel1.textContent = result[0];
            reel2.textContent = result[1];
            reel3.textContent = result[2];

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–∏–≥—Ä—ã—à–∞
            currentWin = 0;
            let isJackpot = Math.random() < 0.01;
            if (result[0] === result[1] && result[1] === result[2]) {
                if (isJackpot && result[0] === "üåü") {
                    currentWin = jackpot;
                    jackpot = 1000;
                    resultElement.textContent = `üéØ JACKPOT! You won ${currentWin} coins!`;
                    reel1.classList.add("win-flash", "shake");
                    reel2.classList.add("win-flash", "shake");
                    reel3.classList.add("win-flash", "shake");
                    winSound.play().catch(() => {});
                    launchConfetti(); // –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
                } else if (result[0] === "7Ô∏è‚É£") {
                    currentWin = 100;
                    reel1.classList.add("win-flash");
                    reel2.classList.add("win-flash");
                    reel3.classList.add("win-flash");
                    winSound.play().catch(() => {});
                } else if (result[0] === "üíé") {
                    currentWin = 50;
                    reel1.classList.add("win-flash");
                    reel2.classList.add("win-flash");
                    reel3.classList.add("win-flash");
                    winSound.play().catch(() => {});
                } else if (result[0] === "üçí") {
                    currentWin = 10;
                    reel1.classList.add("win-flash");
                    reel2.classList.add("win-flash");
                    reel3.classList.add("win-flash");
                    winSound.play().catch(() => {});
                }
            }

            if (result[0] === "üíé" && result[1] === "üíé" && result[2] === "üíé") {
                bonusGame.classList.add("active");
                resultElement.textContent = "üéâ Bonus Game! Guess the card color to double your win!";
            } else {
                balance += currentWin;
                balanceElement.textContent = balance;
                jackpotElement.textContent = jackpot;
                resultElement.textContent = currentWin > 0 ? `üéâ You won ${currentWin} coins!` : "Try again!";
                isSpinning = false;
                spinButton.disabled = false;
                dailyBonusButton.disabled = false;
            }

            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
            localStorage.setItem("balance", balance);
            localStorage.setItem("jackpot", jackpot);
        }

        // –ë–æ–Ω—É—Å–Ω–∞—è –∏–≥—Ä–∞: —É–≥–∞–¥–∞—Ç—å —Ü–≤–µ—Ç –∫–∞—Ä—Ç—ã
        function guessCard(guess) {
            const isRed = Math.random() > 0.5;
            const correct = (isRed && guess === "red") || (!isRed && guess === "black");

            if (correct) {
                currentWin *= 2;
                resultElement.textContent = `üé¥ Correct! Your win is doubled to ${currentWin} coins!`;
                winSound.play().catch(() => {});
            } else {
                currentWin = 0;
                resultElement.textContent = "üé¥ Wrong guess! No bonus win.";
            }

            balance += currentWin;
            balanceElement.textContent = balance;
            localStorage.setItem("balance", balance);
            bonusGame.classList.remove("active");
            isSpinning = false;
            spinButton.disabled = false;
            dailyBonusButton.disabled = false;
        }

        // –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å
        function claimDailyBonus() {
            const now = Date.now();
            const lastBonus = localStorage.getItem("lastBonus");
            if (lastBonus && now - lastBonus < 24 * 60 * 60 * 1000) {
                resultElement.textContent = "Come back tomorrow for your next bonus!";
                return;
            }

            balance += 50;
            balanceElement.textContent = balance;
            resultElement.textContent = "üéÅ You claimed 50 bonus coins!";
            localStorage.setItem("balance", balance);
            localStorage.setItem("lastBonus", now);
            dailyBonusButton.disabled = true;
            dailyBonusButton.textContent = "Bonus Claimed!";
            winSound.play().catch(() => {});
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å–∏–º–≤–æ–ª–∞ —Å —É—á–µ—Ç–æ–º –≤–µ—Å–æ–≤
        function weightedRandom(items, weights) {
            const totalWeight = weights.reduce((sum, w) => sum + w, 0);
            const rand = Math.random() * totalWeight;
            let currentWeight = 0;
            for (let i = 0; i < items.length; i++) {
                currentWeight += weights[i];
                if (rand <= currentWeight) return items[i];
            }
            return items[items.length - 1];
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫
        spinButton.addEventListener("click", spinReels);
        dailyBonusButton.addEventListener("click", claimDailyBonus);
    </script>
</body>
</html>
